//////////////////////////////////////////////////////////////////////////////
// Filename    : SimpleTileEffect.cpp
// Written by  : bezz
//////////////////////////////////////////////////////////////////////////////

#include "SimpleTileEffect.h"
#include "Tile.h"
#include "Zone.h"
#include "Gpackets/GCRemoveEffect.h"

//////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////
SimpleTileEffect::SimpleTileEffect(EffectClass eClass, Zone* pZone, ZoneCoord_t x, ZoneCoord_t y)
	throw(Error) :
	m_EffectClass( eClass )
{
	__BEGIN_TRY

	m_pZone = pZone;
	m_X = x;
	m_Y = y;

	__END_CATCH
}

//////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////
void SimpleTileEffect::unaffect()
	throw(Error)
{
	__BEGIN_TRY

	Tile& tile = m_pZone->getTile( m_X, m_Y );
	tile.deleteEffect( m_ObjectID );

	__END_CATCH
}

//////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////
string SimpleTileEffect::toString() const 
	throw()
{
	__BEGIN_TRY

	StringStream msg;
	msg << "SimpleTileEffect("
		<< ")";
	return msg.toString();

	__END_CATCH
}

